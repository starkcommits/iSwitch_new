var R=(i,c,r)=>new Promise((b,a)=>{var d=l=>{try{x(r.next(l))}catch(g){a(g)}},v=l=>{try{x(r.throw(l))}catch(g){a(g)}},x=l=>l.done?b(l.value):Promise.resolve(l.value).then(d,v);x((r=r.apply(i,c)).next())});import{_ as I,c as S,a as _,b as t,d as j,n as N,r as z,t as m,o as C,s as H,e as p,f as q,g as w,w as k,h as P,v as Q,i as W,j as $,k as F}from"./index-DeMjJ5Kn.js";import{D as G}from"./DataTable-DlyB0hjc.js";const J={class:"rounded-xl border bg-card text-card-foreground shadow-sm p-4 md:p-6 flex flex-col gap-3 md:gap-4"},X={class:"flex items-center justify-between"},Y={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},K={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Z={class:"flex flex-col gap-1"},ee={class:"text-sm font-medium text-muted-foreground"},te={class:"text-3xl font-bold tracking-tight"},se={class:"text-xs text-muted-foreground"},oe={__name:"StatCard",props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0},trend:{type:Number,default:0},description:{type:String,default:""},variant:{type:String,default:"primary",validator:i=>["primary","success","warning","info","destructive"].includes(i)},prefix:{type:String,default:""},suffix:{type:String,default:""}},setup(i){const c=i,r=S(()=>`${c.prefix}${c.value}${c.suffix}`),b=S(()=>{const d={primary:"bg-gradient-to-br from-violet-500 to-purple-600",success:"bg-gradient-to-br from-green-500 to-emerald-600",warning:"bg-gradient-to-br from-amber-500 to-orange-600",info:"bg-gradient-to-br from-blue-500 to-indigo-600",destructive:"bg-gradient-to-br from-red-500 to-rose-600"};return d[c.variant]||d.primary}),a=S(()=>c.trend>0?"bg-green-500/10 text-green-700 dark:text-green-400":c.trend<0?"bg-red-500/10 text-red-700 dark:text-red-400":"bg-gray-500/10 text-gray-700 dark:text-gray-400");return(d,v)=>(C(),_("div",J,[t("div",X,[t("div",{class:N(["w-12 h-12 rounded-lg flex items-center justify-center text-white",b.value])},[z(d.$slots,"icon",{},()=>[v[0]||(v[0]=t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"})],-1))],!0)],2),i.trend!==0?(C(),_("div",{key:0,class:N(["flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold",a.value])},[i.trend>0?(C(),_("svg",Y,[...v[1]||(v[1]=[t("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"},null,-1),t("polyline",{points:"17 6 23 6 23 12"},null,-1)])])):(C(),_("svg",K,[...v[2]||(v[2]=[t("polyline",{points:"23 18 13.5 8.5 8.5 13.5 1 6"},null,-1),t("polyline",{points:"17 18 23 18 23 12"},null,-1)])])),t("span",null,m(Math.abs(i.trend))+"%",1)],2)):j("",!0)]),t("div",Z,[t("div",ee,m(i.label),1),t("div",te,m(r.value),1),t("p",se,m(i.description),1)])]))}},T=I(oe,[["__scopeId","data-v-50303d85"]]),ae={class:"dashboard"},re={class:"dashboard-header"},ne={class:"page-subtitle"},le={class:"metrics-grid-four"},ie={class:"transactions-section"},de={class:"rounded-xl border bg-card text-card-foreground shadow-sm p-6 mb-6"},ue={class:"flex flex-wrap items-end gap-4"},ce={class:"flex-1 min-w-[200px]"},ve={class:"flex-1 min-w-[200px]"},ge={class:"flex-1 min-w-[200px]"},fe={class:"customer-cell"},pe={class:"customer-avatar"},me={__name:"Home",setup(i){const c=S(()=>H.user||"User"),r=p({status:"",fromDate:"",toDate:""}),b=p({balance:0,status:"Inactive"}),a=p({totalRevenue:0,transactions:0,processedOrders:0,pendingOrders:0,cancelledOrders:0,totalPendingAmount:0,totalCancelledAmount:0}),d=p({success:0,pending:0,failed:0}),v=()=>R(this,null,function*(){try{const s=yield F("iswitch.admin_portal_api.get_dashboard_stats"),e=(s==null?void 0:s.message)||s;e&&(e.wallet&&(b.value.balance=e.wallet.balance||0,b.value.status=e.wallet.status||"Inactive"),e.stats&&(a.value={totalRevenue:e.stats.total_processed_amount||0,transactions:e.stats.total_orders||0,processedOrders:e.stats.processed_orders||0,pendingOrders:e.stats.pending_orders||0,cancelledOrders:e.stats.cancelled_orders||0,totalPendingAmount:e.stats.total_pending_amount||0,totalCancelledAmount:e.stats.total_cancelled_amount||0},d.value={success:a.value.processedOrders,pending:a.value.pendingOrders,failed:a.value.cancelledOrders},M()))}catch(s){console.error("Error fetching dashboard stats:",s),a.value={totalRevenue:0,transactions:0,processedOrders:0,pendingOrders:0,cancelledOrders:0,totalPendingAmount:0,totalCancelledAmount:0}}}),x=()=>R(this,null,function*(){try{const s={status:r.value.status||null,from_date:r.value.fromDate||null,to_date:r.value.toDate||null},e=yield F("iswitch.admin_portal_api.get_orders",{filter_data:JSON.stringify(s),page:1,page_size:5,sort_by:"creation",sort_order:"desc"}),o=(e==null?void 0:e.message)||e;o&&o.orders&&(A.value=o.orders.map(n=>({id:n.id,customer:n.customer||"N/A",amount:parseFloat(n.amount||0),fee:parseFloat(n.fee||0),status:n.status,utr:n.utr||"-",date:n.date})))}catch(s){console.error("Error fetching recent transactions:",s),A.value=[]}}),l=p(null),g=p(null),B=[{key:"id",label:"ORDER ID",sortable:!0},{key:"customer",label:"CUSTOMER",sortable:!0},{key:"amount",label:"AMOUNT",type:"currency",sortable:!0},{key:"fee",label:"FEE",type:"currency",sortable:!0},{key:"status",label:"STATUS",type:"badge",sortable:!0},{key:"utr",label:"UTR",sortable:!0},{key:"date",label:"DATE",type:"datetime",sortable:!0}],A=p([]),V=S(()=>A.value),O=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(s),U=()=>{console.log("Filters applied:",r.value),x()},M=()=>{if(l.value){const s=l.value.getContext("2d"),e=l.value.width,o=l.value.height;s.clearRect(0,0,e,o);const n=s.createLinearGradient(0,0,0,o);n.addColorStop(0,"rgba(139, 92, 246, 0.1)"),n.addColorStop(1,"rgba(139, 92, 246, 0)");const u=[{x:50,y:200},{x:150,y:150},{x:250,y:180},{x:350,y:120},{x:450,y:140},{x:550,y:80},{x:650,y:100}];s.beginPath(),s.moveTo(u[0].x,u[0].y);for(let f=1;f<u.length;f++)s.lineTo(u[f].x,u[f].y);s.strokeStyle="#8b5cf6",s.lineWidth=3,s.stroke(),s.lineTo(u[u.length-1].x,o),s.lineTo(u[0].x,o),s.closePath(),s.fillStyle=n,s.fill()}if(g.value){const s=g.value.getContext("2d"),e=g.value.width,o=g.value.height,n=e/2,u=o/2,f=Math.min(e,o)/3;s.clearRect(0,0,e,o);const E=[{value:d.value.success,color:"#10b981"},{value:d.value.pending,color:"#f59e0b"},{value:d.value.failed,color:"#ef4444"}],L=E.reduce((D,h)=>D+h.value,0);let y=-Math.PI/2;E.forEach(D=>{const h=D.value/L*2*Math.PI;s.beginPath(),s.arc(n,u,f,y,y+h),s.arc(n,u,f*.6,y+h,y,!0),s.closePath(),s.fillStyle=D.color,s.fill(),y+=h})}};return q(()=>{v(),x(),M()}),(s,e)=>(C(),_("div",ae,[t("div",re,[t("div",null,[e[3]||(e[3]=t("h1",{class:"page-title"},"Dashboard",-1)),t("p",ne,"Welcome back, "+m(c.value)+"! Here's what's happening today.",1)])]),t("div",le,[w(T,{label:"Total Orders",value:a.value.transactions.toLocaleString(),trend:0,description:O(a.value.totalRevenue),variant:"info"},{icon:k(()=>[...e[4]||(e[4]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),t("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),t("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)])]),_:1},8,["value","description"]),w(T,{label:"Processed Orders",value:a.value.processedOrders.toLocaleString(),trend:0,description:O(a.value.totalRevenue),variant:"success"},{icon:k(()=>[...e[5]||(e[5]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)])]),_:1},8,["value","description"]),w(T,{label:"Pending Orders",value:a.value.pendingOrders.toLocaleString(),trend:0,description:O(a.value.totalPendingAmount),variant:"warning"},{icon:k(()=>[...e[6]||(e[6]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})],-1)])]),_:1},8,["value","description"]),w(T,{label:"Failed Orders",value:a.value.cancelledOrders.toLocaleString(),trend:0,description:O(a.value.totalCancelledAmount),variant:"destructive"},{icon:k(()=>[...e[7]||(e[7]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),t("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)])]),_:1},8,["value","description"])]),t("div",ie,[e[13]||(e[13]=t("div",{class:"transactions-header"},[t("h2",{class:"section-title"},"Recent Orders")],-1)),t("div",de,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold mb-4"},"Filters",-1)),t("div",ue,[t("div",ce,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"STATUS",-1)),P(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.status=o),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[8]||(e[8]=[W('<option value="" data-v-18f378a0>All Status</option><option value="Queued" data-v-18f378a0>Queued</option><option value="Processing" data-v-18f378a0>Processing</option><option value="Processed" data-v-18f378a0>Processed</option><option value="Cancelled" data-v-18f378a0>Cancelled</option><option value="Reversed" data-v-18f378a0>Reversed</option>',6)])],512),[[Q,r.value.status]])]),t("div",ve,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"FROM DATE & TIME",-1)),P(t("input",{type:"datetime-local","onUpdate:modelValue":e[1]||(e[1]=o=>r.value.fromDate=o),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[$,r.value.fromDate]])]),t("div",ge,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"TO DATE & TIME",-1)),P(t("input",{type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=o=>r.value.toDate=o),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[$,r.value.toDate]])]),t("button",{class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-6",onClick:U}," Apply Filters ")])]),w(G,{columns:B,data:V.value,"per-page":5},{"cell-customer":k(({value:o})=>[t("div",fe,[t("div",pe,m(o.charAt(0)),1),t("span",null,m(o),1)])]),_:1},8,["data"])])]))}},he=I(me,[["__scopeId","data-v-18f378a0"]]);export{he as default};
//# sourceMappingURL=Home-C9oyNBQm.js.map
