var f=(p,s,n)=>new Promise((l,i)=>{var d=o=>{try{u(n.next(o))}catch(e){i(e)}},c=o=>{try{u(n.throw(o))}catch(e){i(e)}},u=o=>o.done?l(o.value):Promise.resolve(o.value).then(d,c);u((n=n.apply(p,s)).next())});import{_ as v,e as m,f as x,a as y,b as t,l as _,h as b,v as k,j as g,g as w,k as h,o as D}from"./index-BmWnvbnI.js";import{D as A}from"./DataTable-Dxl-5-xM.js";const N={class:"space-y-6"},V={class:"rounded-xl border bg-card text-card-foreground shadow-sm p-6 mb-6"},T={class:"flex flex-wrap items-end gap-4"},S={class:"flex-1 min-w-[200px]"},F={class:"flex-1 min-w-[200px]"},M={class:"flex-1 min-w-[200px]"},E={class:"rounded-xl border bg-card text-card-foreground shadow-sm overflow-hidden"},L={__name:"VANLogs",setup(p){const s=m({status:"",fromDate:"",toDate:""}),n=[{key:"id",label:"Transaction ID",sortable:!0},{key:"merchant",label:"Merchant",sortable:!0},{key:"account_number",label:"Account Number",sortable:!0},{key:"amount",label:"Amount",type:"currency",sortable:!0},{key:"type",label:"Type",type:"badge",sortable:!0},{key:"utr",label:"UTR",sortable:!0},{key:"status",label:"Status",type:"badge",sortable:!0},{key:"date",label:"Date",type:"datetime",sortable:!0}],l=m([]),i=m(!1),d=()=>f(this,null,function*(){i.value=!0;try{const o={status:s.value.status||null,from_date:s.value.fromDate||null,to_date:s.value.toDate||null},e=yield h("iswitch.admin_portal_api.get_van_logs",{filter_data:JSON.stringify(o),page:1,page_size:50}),r=(e==null?void 0:e.message)||e;r&&r.logs&&(l.value=r.logs.map(a=>({id:a.id,merchant:a.merchant_name||"N/A",account_number:a.account_number,amount:parseFloat(a.amount||0),type:a.type,utr:a.utr||"-",status:a.status.toLowerCase(),opening_balance:parseFloat(a.opening_balance||0),closing_balance:parseFloat(a.closing_balance||0),remitter_name:a.remitter_name,remitter_account_number:a.remitter_account_number,remitter_ifsc_code:a.remitter_ifsc_code,date:a.date})))}catch(o){console.error("Error fetching VAN logs:",o),l.value=[]}finally{i.value=!1}}),c=()=>{d()},u=()=>f(this,null,function*(){try{const o={status:s.value.status||null,from_date:s.value.fromDate||null,to_date:s.value.toDate||null},e=new URLSearchParams({filters:JSON.stringify(o)}).toString();window.location.href=`/api/method/iswitch.admin_portal_api.export_van_logs_to_excel?${e}`}catch(o){console.error("Error exporting VAN logs:",o)}});return x(()=>{d()}),(o,e)=>(D(),y("div",N,[t("div",{class:"flex items-center justify-between"},[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"VAN Logs"),t("p",{class:"text-muted-foreground mt-1"},"Monitor Virtual Account Number (VAN) activity and logs.")],-1)),t("div",{class:"flex items-center gap-2"},[t("button",{class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2",onClick:u},[...e[3]||(e[3]=[t("svg",{class:"mr-2 h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),_(" Export ",-1)])])])]),t("div",V,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4"},"Filters",-1)),t("div",T,[t("div",S,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"STATUS",-1)),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.status=r),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[5]||(e[5]=[t("option",{value:""},"All Status",-1),t("option",{value:"Success"},"Success",-1),t("option",{value:"Pending"},"Pending",-1),t("option",{value:"Failed"},"Failed",-1)])],512),[[k,s.value.status]])]),t("div",F,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"FROM DATE & TIME",-1)),b(t("input",{type:"datetime-local","onUpdate:modelValue":e[1]||(e[1]=r=>s.value.fromDate=r),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[g,s.value.fromDate]])]),t("div",M,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"TO DATE & TIME",-1)),b(t("input",{type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=r=>s.value.toDate=r),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[g,s.value.toDate]])]),t("button",{class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-6",onClick:c}," Apply Filters ")])]),t("div",E,[w(A,{columns:n,data:l.value,"per-page":10},null,8,["data"])])]))}},B=v(L,[["__scopeId","data-v-c5a27c0a"]]);export{B as default};
//# sourceMappingURL=VANLogs-C1e9ffoN.js.map
