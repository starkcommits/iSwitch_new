{"version":3,"file":"Services-CKGuf32_.js","sources":["../../../../admin/src/components/ui/switch/Switch.vue","../../../../admin/src/pages/Services.vue"],"sourcesContent":["<script setup>\nimport { computed } from \"vue\";\nimport { SwitchRoot, SwitchThumb } from \"radix-vue\";\nimport { cn } from \"@/lib/utils\";\n\nconst props = defineProps({\n  checked: { type: Boolean, required: false },\n  onCheckedChange: { type: Function, required: false },\n  disabled: { type: Boolean, required: false },\n  asChild: { type: Boolean, required: false },\n  as: { type: null, required: false },\n  class: { type: null, required: false },\n});\n\nconst emits = defineEmits([\"update:checked\"]);\n\nconst delegatedProps = computed(() => {\n  const { class: _, ...delegated } = props;\n  return delegated;\n});\n\nconst forwarded = computed(() => {\n    return {\n        \"onUpdate:checked\": (value) => emits(\"update:checked\", value)\n    }\n})\n</script>\n\n<template>\n  <SwitchRoot\n    v-bind=\"{ ...delegatedProps, ...forwarded }\"\n    :class=\"\n      cn(\n        'peer inline-flex h-[20px] w-[36px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input',\n        props.class,\n      )\n    \"\n  >\n    <SwitchThumb\n      :class=\"\n        cn(\n          'pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0',\n        )\n      \"\n    />\n  </SwitchRoot>\n</template>\n","<template>\n  <div class=\"space-y-6\">\n    <div class=\"flex items-center justify-between\">\n      <div>\n        <h1 class=\"text-3xl font-bold tracking-tight text-foreground\">Services</h1>\n        <p class=\"text-muted-foreground mt-1\">Manage active services and products.</p>\n      </div>\n    </div>\n\n    <!-- Services Table -->\n    <div class=\"rounded-xl border bg-card text-card-foreground shadow-sm overflow-hidden\">\n      <DataTable\n        :columns=\"serviceColumns\"\n        :data=\"services\"\n        :per-page=\"20\"\n      >\n        <template #cell-status=\"{ row }\">\n          <div class=\"flex items-center space-x-2\">\n            <Switch \n              :checked=\"row.is_active\"\n              @update:checked=\"(val) => toggleService(row, val)\" \n            />\n            <span class=\"text-sm font-medium\" :class=\"row.is_active ? 'text-green-600' : 'text-gray-500'\">\n              {{ row.is_active ? 'Active' : 'Inactive' }}\n            </span>\n          </div>\n        </template>\n      </DataTable>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport DataTable from '@/components/DataTable.vue'\nimport { Switch } from '@/components/ui/switch'\nimport { call } from 'frappe-ui'\n\nconst serviceColumns = [\n  { key: 'product_name', label: 'Service Name', sortable: true },\n  { key: 'status', label: 'Status', sortable: false }\n]\n\nconst services = ref([])\nconst loading = ref(false)\n\nconst fetchServices = async () => {\n  loading.value = true\n  try {\n    const response = await call('iswitch.admin_portal_api.get_services')\n    const data = response?.message || response\n    if (data && data.services) {\n      services.value = data.services.map(s => ({\n        ...s,\n        is_active: !!s.is_active\n      }))\n    }\n  } catch (error) {\n    console.error('Error fetching services:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst toggleService = async (service, newState) => {\n  // Optimistic update\n  const originalState = service.is_active\n  service.is_active = newState\n  \n  try {\n    await call('iswitch.admin_portal_api.toggle_service_status', {\n      service_name: service.name,\n      is_active: newState\n    })\n  } catch (error) {\n    console.error('Error toggling service:', error)\n    // Revert on error\n    service.is_active = originalState\n  }\n}\n\nonMounted(() => {\n  fetchServices()\n})\n</script>\n"],"names":["props","__props","emits","__emit","delegatedProps","computed","_a","_","__objRest","forwarded","value","_openBlock","_createBlock","_unref","SwitchRoot","_mergeProps","__spreadValues","cn","_createVNode","SwitchThumb","_normalizeClass","serviceColumns","services","ref","loading","fetchServices","__async","response","call","data","s","__spreadProps","error","toggleService","service","newState","originalState","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","DataTable","_withCtx","row","_hoisted_3","Switch","val","_toDisplayString"],"mappings":"4xCAKA,MAAMA,EAAQC,EASRC,EAAQC,EAERC,EAAiBC,EAAS,IAAM,CACpC,MAAmCC,EAAAN,EAA3B,OAAOO,GAAoBD,EACnC,OADqBE,EAAcF,EAAd,CAAb,SAEV,CAAC,EAEKG,EAAYJ,EAAS,KAChB,CACH,mBAAqBK,GAAUR,EAAM,iBAAkBQ,CAAK,CACpE,EACC,gBAICC,EAAA,EAAAC,EAgBaC,EAAAC,CAAA,EAhBbC,EAgBaC,IAAA,GAfEZ,EAAA,OAAmBK,EAAA,OAAS,CACxC,MAAcI,EAAAI,CAAA,0YAA6ZjB,EAAM,oBAOlb,IAME,CANFkB,EAMEL,EAAAM,CAAA,EAAA,CALC,MAAKC,EAAWP,EAAAI,CAAA,6YCDvB,MAAMI,EAAiB,CACrB,CAAE,IAAK,eAAgB,MAAO,eAAgB,SAAU,EAAI,EAC5D,CAAE,IAAK,SAAU,MAAO,SAAU,SAAU,EAAK,CACnD,EAEMC,EAAWC,EAAI,CAAA,CAAE,EACjBC,EAAUD,EAAI,EAAK,EAEnBE,EAAgB,IAAYC,EAAA,sBAChCF,EAAQ,MAAQ,GAChB,GAAI,CACF,MAAMG,EAAW,MAAMC,EAAK,uCAAuC,EAC7DC,GAAOF,GAAA,YAAAA,EAAU,UAAWA,EAC9BE,GAAQA,EAAK,WACfP,EAAS,MAAQO,EAAK,SAAS,IAAIC,GAAMC,EAAAf,EAAA,GACpCc,GADoC,CAEvC,UAAW,CAAC,CAACA,EAAE,SACvB,EAAQ,EAEN,OAASE,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,QAAC,CACCR,EAAQ,MAAQ,EAClB,CACF,GAEMS,EAAgB,CAAOC,EAASC,IAAaT,EAAA,sBAEjD,MAAMU,EAAgBF,EAAQ,UAC9BA,EAAQ,UAAYC,EAEpB,GAAI,CACF,MAAMP,EAAK,iDAAkD,CAC3D,aAAcM,EAAQ,KACtB,UAAWC,CACjB,CAAK,CACH,OAASH,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAE9CE,EAAQ,UAAYE,CACtB,CACF,GAEA,OAAAC,EAAU,IAAM,CACdZ,EAAa,CACf,CAAC,UAlFCd,EAAA,EAAA2B,EA4BM,MA5BNC,EA4BM,aA3BJC,EAKM,MAAA,CALD,MAAM,qCAAmC,CAC5CA,EAGM,MAAA,KAAA,CAFJA,EAA2E,KAAA,CAAvE,MAAM,mDAAmD,EAAC,UAAQ,EACtEA,EAA8E,IAAA,CAA3E,MAAM,4BAA4B,EAAC,sCAAoC,UAK9EA,EAkBM,MAlBNC,EAkBM,CAjBJvB,EAgBYwB,EAAA,CAfT,QAASrB,EACT,KAAMC,EAAA,MACN,WAAU,KAEA,cAAWqB,EACpB,CAQM,CATkB,IAAAC,KAAG,CAC3BJ,EAQM,MARNK,EAQM,CAPJ3B,EAGEL,EAAAiC,CAAA,EAAA,CAFC,QAASF,EAAI,UACb,mBAAiBG,GAAQd,EAAcW,EAAKG,CAAG,0CAElDP,EAEO,OAAA,CAFD,MAAKpB,EAAA,CAAC,sBAA8BwB,EAAI,UAAS,iBAAA,eAAA,CAAA,CAClD,EAAAI,EAAAJ,EAAI,UAAS,SAAA,UAAA,EAAA,CAAA"}