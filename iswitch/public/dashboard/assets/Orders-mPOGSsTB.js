var g=(p,t,n)=>new Promise((i,c)=>{var b=r=>{try{u(n.next(r))}catch(f){c(f)}},m=r=>{try{u(n.throw(r))}catch(f){c(f)}},u=r=>r.done?i(r.value):Promise.resolve(r.value).then(b,m);u((n=n.apply(p,t)).next())});import{_ as D,e as d,c as k,f as w,a as S,b as o,g as _,l as T,h as v,v as h,i as A,j as x,w as E,k as O,o as C,t as M}from"./index-D1F3q4pw.js";import{D as U}from"./DataTable-DyFfHt6w.js";const N={class:"max-w-[1400px] mx-auto"},R={class:"rounded-xl border bg-card text-card-foreground shadow-sm p-4 md:p-6 mb-6"},V={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end"},F={class:"font-medium"},P={__name:"Orders",setup(p){const t=d({status:"All Status",fromDate:"",toDate:""}),n=[{key:"id",label:"ORDER ID",sortable:!0},{key:"customer",label:"CUSTOMER",sortable:!0},{key:"amount",label:"AMOUNT",type:"currency",sortable:!0},{key:"fee",label:"FEE",type:"currency",sortable:!0},{key:"status",label:"STATUS",type:"badge",sortable:!0},{key:"utr",label:"UTR",sortable:!0},{key:"date",label:"DATE",type:"datetime",sortable:!0}],i=d([]),c=d(0),b=d(1),m=d(20),u=d(!1),r=()=>g(this,null,function*(){u.value=!0;try{const s={status:t.value.status!=="All Status"?t.value.status:null,from_date:t.value.fromDate||null,to_date:t.value.toDate||null},e=yield O("iswitch.merchant_portal_api.get_orders",{filter_data:JSON.stringify(s),page:b.value,page_size:m.value,sort_by:"creation",sort_order:"desc"}),a=(e==null?void 0:e.message)||e;a&&a.orders&&(i.value=a.orders.map(l=>({id:l.id,customer:l.customer||"N/A",amount:parseFloat(l.amount||0),fee:parseFloat(l.fee||0),status:l.status,utr:l.utr||"-",date:l.date})),c.value=a.total||0)}catch(s){console.error("Error fetching orders:",s),i.value=[],c.value=0}finally{u.value=!1}});k(()=>{let s=[...i.value];if(t.value.status&&t.value.status!=="All Status"&&t.value.status!==""&&(s=s.filter(e=>e.status.toLowerCase()===t.value.status.toLowerCase())),t.value.fromDate){const e=new Date(t.value.fromDate);s=s.filter(a=>new Date(a.date)>=e)}if(t.value.toDate){const e=new Date(t.value.toDate);s=s.filter(a=>new Date(a.date)<=e)}return s});const f=()=>{b.value=1,r()},y=()=>{try{const s={status:t.value.status!=="All Status"?t.value.status:null,from_date:t.value.fromDate||null,to_date:t.value.toDate||null},e=new URLSearchParams({filters:JSON.stringify(s)}).toString();window.location.href=`/api/method/iswitch.merchant_portal_api.export_orders_to_excel?${e}`}catch(s){console.error("Error exporting orders:",s)}};return w(()=>{r()}),(s,e)=>(C(),S("div",N,[o("div",{class:"flex items-center justify-between mb-8"},[e[4]||(e[4]=o("div",null,[o("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"Orders"),o("p",{class:"text-muted-foreground mt-1"},"View and track all your transaction orders.")],-1)),o("button",{class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2",onClick:y},[...e[3]||(e[3]=[o("svg",{class:"mr-2 h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o("polyline",{points:"7 10 12 15 17 10"}),o("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),T(" Export ",-1)])])]),o("div",R,[e[9]||(e[9]=o("h3",{class:"text-lg font-semibold mb-4"},"Filters",-1)),o("div",V,[o("div",null,[e[6]||(e[6]=o("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"STATUS",-1)),v(o("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.status=a),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[5]||(e[5]=[A('<option value="All Status" data-v-8bd37647>All Status</option><option value="Queued" data-v-8bd37647>Queued</option><option value="Processing" data-v-8bd37647>Processing</option><option value="Processed" data-v-8bd37647>Processed</option><option value="Cancelled" data-v-8bd37647>Cancelled</option><option value="Reversed" data-v-8bd37647>Reversed</option>',6)])],512),[[h,t.value.status]])]),o("div",null,[e[7]||(e[7]=o("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"FROM DATE & TIME",-1)),v(o("input",{type:"datetime-local","onUpdate:modelValue":e[1]||(e[1]=a=>t.value.fromDate=a),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,t.value.fromDate]])]),o("div",null,[e[8]||(e[8]=o("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"TO DATE & TIME",-1)),v(o("input",{type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=a=>t.value.toDate=a),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,t.value.toDate]])]),o("button",{class:"w-full inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-6",onClick:f}," Apply Filters ")])]),_(U,{columns:n,data:i.value,"per-page":10},{"cell-customer":E(({value:a})=>[o("span",F,M(a),1)]),_:1},8,["data"])]))}},L=D(P,[["__scopeId","data-v-8bd37647"]]);export{L as default};
//# sourceMappingURL=Orders-mPOGSsTB.js.map
