var f=(p,s,l)=>new Promise((a,i)=>{var u=o=>{try{d(l.next(o))}catch(e){i(e)}},c=o=>{try{d(l.throw(o))}catch(e){i(e)}},d=o=>o.done?a(o.value):Promise.resolve(o.value).then(u,c);d((l=l.apply(p,s)).next())});import{_ as x,e as g,f as v,a as y,b as t,l as _,h as b,v as k,j as m,g as w,w as D,k as h,o as T,n as C,t as E}from"./index-CbX0I7_Y.js";import{D as A}from"./DataTable-Cs1Z49UE.js";const L={class:"space-y-6"},F={class:"rounded-xl border bg-card text-card-foreground shadow-sm p-6 mb-6"},M={class:"flex flex-wrap items-end gap-4"},N={class:"flex-1 min-w-[200px]"},O={class:"flex-1 min-w-[200px]"},S={class:"flex-1 min-w-[200px]"},V={class:"rounded-xl border bg-card text-card-foreground shadow-sm overflow-hidden"},B={__name:"Ledger",setup(p){const s=g({type:"",fromDate:"",toDate:""}),l=[{key:"id",label:"Ledger ID",sortable:!0},{key:"order_id",label:"Order ID",sortable:!0},{key:"type",label:"Transaction Type",type:"badge",sortable:!0},{key:"transaction_amount",label:"Transaction Amount",type:"currency",sortable:!0},{key:"opening_balance",label:"Opening Balance",type:"currency",sortable:!0},{key:"closing_balance",label:"Closing Balance",type:"currency",sortable:!0},{key:"date",label:"Date",type:"datetime",sortable:!0}],a=g([]),i=g(!1),u=()=>f(this,null,function*(){i.value=!0;try{const o={type:s.value.type||null,from_date:s.value.fromDate||null,to_date:s.value.toDate||null},e=yield h("iswitch.merchant_portal_api.get_ledger_entries",{filter_data:JSON.stringify(o),page:1,page_size:50}),r=(e==null?void 0:e.message)||e;r&&r.entries&&(a.value=r.entries.map(n=>({id:n.id,order_id:n.order_id||"-",type:n.type.toLowerCase(),transaction_amount:parseFloat(n.transaction_amount||0),opening_balance:parseFloat(n.opening_balance||0),closing_balance:parseFloat(n.closing_balance||0),date:n.date})))}catch(o){console.error("Error fetching ledger:",o),a.value=[]}finally{i.value=!1}}),c=()=>{u()},d=()=>f(this,null,function*(){try{const o={type:s.value.type||null,from_date:s.value.fromDate||null,to_date:s.value.toDate||null},e=new URLSearchParams({filters:JSON.stringify(o)}).toString();window.location.href=`/api/method/iswitch.merchant_portal_api.export_ledger_to_excel?${e}`}catch(o){console.error("Error exporting ledger:",o)}});return v(()=>{u()}),(o,e)=>(T(),y("div",L,[t("div",{class:"flex items-center justify-between"},[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"Ledger"),t("p",{class:"text-muted-foreground mt-1"},"View and manage your financial transactions.")],-1)),t("button",{class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2",onClick:d},[...e[3]||(e[3]=[t("svg",{class:"mr-2 h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),_(" Export ",-1)])])]),t("div",F,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4"},"Filters",-1)),t("div",M,[t("div",N,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"TRANSACTION TYPE",-1)),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.type=r),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[5]||(e[5]=[t("option",{value:""},"All Types",-1),t("option",{value:"Credit"},"Credit",-1),t("option",{value:"Debit"},"Debit",-1)])],512),[[k,s.value.type]])]),t("div",O,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"FROM DATE & TIME",-1)),b(t("input",{type:"datetime-local","onUpdate:modelValue":e[1]||(e[1]=r=>s.value.fromDate=r),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[m,s.value.fromDate]])]),t("div",S,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"TO DATE & TIME",-1)),b(t("input",{type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=r=>s.value.toDate=r),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[m,s.value.toDate]])]),t("button",{class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-6",onClick:c}," Apply Filters ")])]),t("div",V,[w(A,{columns:l,data:a.value,"per-page":10},{"cell-status":D(({value:r})=>[t("span",{class:C(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":r==="success","bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":r==="processing","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":r==="failed"}])},E(r.charAt(0).toUpperCase()+r.slice(1)),3)]),_:1},8,["data"])])]))}},P=x(B,[["__scopeId","data-v-41f800e0"]]);export{P as default};
//# sourceMappingURL=Ledger-B8xa55fY.js.map
