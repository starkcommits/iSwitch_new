var P=(i,c,a)=>new Promise((m,r)=>{var d=l=>{try{b(a.next(l))}catch(v){r(v)}},g=l=>{try{b(a.throw(l))}catch(v){r(v)}},b=l=>l.done?m(l.value):Promise.resolve(l.value).then(d,g);b((a=a.apply(i,c)).next())});import{_ as I,c as O,a as _,b as t,d as j,n as N,r as z,t as x,o as C,s as H,e as p,f as q,g as w,w as k,h as R,v as Q,i as W,j as $,k as F}from"./index-D1F3q4pw.js";import{D as G}from"./DataTable-DyFfHt6w.js";const J={class:"rounded-xl border bg-card text-card-foreground shadow-sm p-4 md:p-6 flex flex-col gap-3 md:gap-4"},X={class:"flex items-center justify-between"},Y={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},K={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Z={class:"flex flex-col gap-1"},ee={class:"text-sm font-medium text-muted-foreground"},te={class:"text-3xl font-bold tracking-tight"},se={class:"text-xs text-muted-foreground"},oe={__name:"StatCard",props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0},trend:{type:Number,default:0},description:{type:String,default:""},variant:{type:String,default:"primary",validator:i=>["primary","success","warning","info","destructive"].includes(i)},prefix:{type:String,default:""},suffix:{type:String,default:""}},setup(i){const c=i,a=O(()=>`${c.prefix}${c.value}${c.suffix}`),m=O(()=>{const d={primary:"bg-gradient-to-br from-violet-500 to-purple-600",success:"bg-gradient-to-br from-green-500 to-emerald-600",warning:"bg-gradient-to-br from-amber-500 to-orange-600",info:"bg-gradient-to-br from-blue-500 to-indigo-600",destructive:"bg-gradient-to-br from-red-500 to-rose-600"};return d[c.variant]||d.primary}),r=O(()=>c.trend>0?"bg-green-500/10 text-green-700 dark:text-green-400":c.trend<0?"bg-red-500/10 text-red-700 dark:text-red-400":"bg-gray-500/10 text-gray-700 dark:text-gray-400");return(d,g)=>(C(),_("div",J,[t("div",X,[t("div",{class:N(["w-12 h-12 rounded-lg flex items-center justify-center text-white",m.value])},[z(d.$slots,"icon",{},()=>[g[0]||(g[0]=t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"})],-1))],!0)],2),i.trend!==0?(C(),_("div",{key:0,class:N(["flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold",r.value])},[i.trend>0?(C(),_("svg",Y,[...g[1]||(g[1]=[t("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"},null,-1),t("polyline",{points:"17 6 23 6 23 12"},null,-1)])])):(C(),_("svg",K,[...g[2]||(g[2]=[t("polyline",{points:"23 18 13.5 8.5 8.5 13.5 1 6"},null,-1),t("polyline",{points:"17 18 23 18 23 12"},null,-1)])])),t("span",null,x(Math.abs(i.trend))+"%",1)],2)):j("",!0)]),t("div",Z,[t("div",ee,x(i.label),1),t("div",te,x(a.value),1),t("p",se,x(i.description),1)])]))}},T=I(oe,[["__scopeId","data-v-50303d85"]]),re={class:"max-w-[1400px] mx-auto"},ae={class:"dashboard-header"},ne={class:"page-subtitle"},le={class:"metrics-grid-four"},ie={class:"transactions-section"},de={class:"rounded-xl border bg-card text-card-foreground shadow-sm p-6 mb-6"},ue={class:"flex flex-wrap items-end gap-4"},ce={class:"flex-1 min-w-[200px]"},ge={class:"flex-1 min-w-[200px]"},ve={class:"flex-1 min-w-[200px]"},fe={class:"font-medium"},pe={__name:"Home",setup(i){const c=O(()=>H.user||"User"),a=p({status:"",fromDate:"",toDate:""}),m=p({balance:0,status:"Inactive"}),r=p({totalRevenue:0,transactions:0,processedOrders:0,pendingOrders:0,cancelledOrders:0,totalPendingAmount:0,totalCancelledAmount:0,totalOrdersAmount:0}),d=p({success:0,pending:0,failed:0}),g=()=>P(this,null,function*(){try{const s=yield F("iswitch.merchant_portal_api.get_dashboard_stats"),e=(s==null?void 0:s.message)||s;e&&(e.wallet&&(m.value.balance=e.wallet.balance||0,m.value.status=e.wallet.status||"Inactive"),e.stats&&(r.value={totalRevenue:e.stats.total_processed_amount||0,transactions:e.stats.total_orders||0,processedOrders:e.stats.processed_orders||0,pendingOrders:e.stats.pending_orders||0,cancelledOrders:e.stats.cancelled_orders||0,totalPendingAmount:e.stats.total_pending_amount||0,totalCancelledAmount:e.stats.total_cancelled_amount||0,totalOrdersAmount:e.stats.total_orders_amount||0},d.value={success:r.value.processedOrders,pending:r.value.pendingOrders,failed:r.value.cancelledOrders},M()))}catch(s){console.error("Error fetching dashboard stats:",s),r.value={totalRevenue:0,transactions:0,processedOrders:0,pendingOrders:0,cancelledOrders:0,totalPendingAmount:0,totalCancelledAmount:0}}}),b=()=>P(this,null,function*(){try{const s={status:a.value.status||null,from_date:a.value.fromDate||null,to_date:a.value.toDate||null},e=yield F("iswitch.merchant_portal_api.get_orders",{filter_data:JSON.stringify(s),page:1,page_size:5,sort_by:"creation",sort_order:"desc"}),o=(e==null?void 0:e.message)||e;o&&o.orders&&(A.value=o.orders.map(n=>({id:n.id,customer:n.customer||"N/A",amount:parseFloat(n.amount||0),fee:parseFloat(n.fee||0),status:n.status,utr:n.utr||"-",date:n.date})))}catch(s){console.error("Error fetching recent transactions:",s),A.value=[]}}),l=p(null),v=p(null),B=[{key:"id",label:"ORDER ID",sortable:!0},{key:"customer",label:"CUSTOMER",sortable:!0},{key:"amount",label:"AMOUNT",type:"currency",sortable:!0},{key:"fee",label:"FEE",type:"currency",sortable:!0},{key:"status",label:"STATUS",type:"badge",sortable:!0},{key:"utr",label:"UTR",sortable:!0},{key:"date",label:"DATE",type:"datetime",sortable:!0}],A=p([]),V=O(()=>A.value),S=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(s),U=()=>{console.log("Filters applied:",a.value),b()},M=()=>{if(l.value){const s=l.value.getContext("2d"),e=l.value.width,o=l.value.height;s.clearRect(0,0,e,o);const n=s.createLinearGradient(0,0,0,o);n.addColorStop(0,"rgba(139, 92, 246, 0.1)"),n.addColorStop(1,"rgba(139, 92, 246, 0)");const u=[{x:50,y:200},{x:150,y:150},{x:250,y:180},{x:350,y:120},{x:450,y:140},{x:550,y:80},{x:650,y:100}];s.beginPath(),s.moveTo(u[0].x,u[0].y);for(let f=1;f<u.length;f++)s.lineTo(u[f].x,u[f].y);s.strokeStyle="#8b5cf6",s.lineWidth=3,s.stroke(),s.lineTo(u[u.length-1].x,o),s.lineTo(u[0].x,o),s.closePath(),s.fillStyle=n,s.fill()}if(v.value){const s=v.value.getContext("2d"),e=v.value.width,o=v.value.height,n=e/2,u=o/2,f=Math.min(e,o)/3;s.clearRect(0,0,e,o);const E=[{value:d.value.success,color:"#10b981"},{value:d.value.pending,color:"#f59e0b"},{value:d.value.failed,color:"#ef4444"}],L=E.reduce((D,h)=>D+h.value,0);let y=-Math.PI/2;E.forEach(D=>{const h=D.value/L*2*Math.PI;s.beginPath(),s.arc(n,u,f,y,y+h),s.arc(n,u,f*.6,y+h,y,!0),s.closePath(),s.fillStyle=D.color,s.fill(),y+=h})}};return q(()=>{g(),b(),M()}),(s,e)=>(C(),_("div",re,[t("div",ae,[t("div",null,[e[3]||(e[3]=t("h1",{class:"page-title"},"Dashboard",-1)),t("p",ne,"Welcome back, "+x(c.value)+"! Here's what's happening today.",1)])]),t("div",le,[w(T,{label:"Total Orders",value:r.value.transactions.toLocaleString(),trend:0,description:S(r.value.totalOrdersAmount),variant:"info"},{icon:k(()=>[...e[4]||(e[4]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),t("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),t("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)])]),_:1},8,["value","description"]),w(T,{label:"Processed Orders",value:r.value.processedOrders.toLocaleString(),trend:0,description:S(r.value.totalRevenue),variant:"success"},{icon:k(()=>[...e[5]||(e[5]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)])]),_:1},8,["value","description"]),w(T,{label:"Pending Orders",value:r.value.pendingOrders.toLocaleString(),trend:0,description:S(r.value.totalPendingAmount),variant:"warning"},{icon:k(()=>[...e[6]||(e[6]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})],-1)])]),_:1},8,["value","description"]),w(T,{label:"Failed Orders",value:r.value.cancelledOrders.toLocaleString(),trend:0,description:S(r.value.totalCancelledAmount),variant:"destructive"},{icon:k(()=>[...e[7]||(e[7]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),t("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)])]),_:1},8,["value","description"])]),t("div",ie,[e[13]||(e[13]=t("div",{class:"transactions-header"},[t("h2",{class:"section-title"},"Recent Orders")],-1)),t("div",de,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold mb-4"},"Filters",-1)),t("div",ue,[t("div",ce,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"STATUS",-1)),R(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.status=o),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[8]||(e[8]=[W('<option value="" data-v-b8035612>All Status</option><option value="Queued" data-v-b8035612>Queued</option><option value="Processing" data-v-b8035612>Processing</option><option value="Processed" data-v-b8035612>Processed</option><option value="Cancelled" data-v-b8035612>Cancelled</option><option value="Reversed" data-v-b8035612>Reversed</option>',6)])],512),[[Q,a.value.status]])]),t("div",ge,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"FROM DATE & TIME",-1)),R(t("input",{type:"datetime-local","onUpdate:modelValue":e[1]||(e[1]=o=>a.value.fromDate=o),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[$,a.value.fromDate]])]),t("div",ve,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"TO DATE & TIME",-1)),R(t("input",{type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=o=>a.value.toDate=o),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[$,a.value.toDate]])]),t("button",{class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-6",onClick:U}," Apply Filters ")])]),w(G,{columns:B,data:V.value,"per-page":5},{"cell-customer":k(({value:o})=>[t("span",fe,x(o),1)]),_:1},8,["data"])])]))}},ye=I(pe,[["__scopeId","data-v-b8035612"]]);export{ye as default};
//# sourceMappingURL=Home-C1nnUH3O.js.map
