var g=(p,o,n)=>new Promise((i,c)=>{var b=r=>{try{u(n.next(r))}catch(f){c(f)}},v=r=>{try{u(n.throw(r))}catch(f){c(f)}},u=r=>r.done?i(r.value):Promise.resolve(r.value).then(b,v);u((n=n.apply(p,o)).next())});import{_ as k,e as d,c as w,f as _,a as S,b as t,g as h,l as T,h as m,v as A,i as E,j as x,w as O,k as C,o as M,t as y}from"./index-kYKU7QHv.js";import{D as U}from"./DataTable-hTjpaOJ0.js";const N={class:"orders-page"},R={class:"rounded-xl border bg-card text-card-foreground shadow-sm p-4 md:p-6 mb-6"},V={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end"},F={class:"customer-cell"},P={class:"customer-avatar"},j={__name:"Orders",setup(p){const o=d({status:"All Status",fromDate:"",toDate:""}),n=[{key:"id",label:"ORDER ID",sortable:!0},{key:"customer",label:"CUSTOMER",sortable:!0},{key:"amount",label:"AMOUNT",type:"currency",sortable:!0},{key:"fee",label:"FEE",type:"currency",sortable:!0},{key:"status",label:"STATUS",type:"badge",sortable:!0},{key:"utr",label:"UTR",sortable:!0},{key:"date",label:"DATE",type:"datetime",sortable:!0}],i=d([]),c=d(0),b=d(1),v=d(20),u=d(!1),r=()=>g(this,null,function*(){u.value=!0;try{const a={status:o.value.status!=="All Status"?o.value.status:null,from_date:o.value.fromDate||null,to_date:o.value.toDate||null},e=yield C("iswitch.merchant_portal_api.get_orders",{filter_data:JSON.stringify(a),page:b.value,page_size:v.value,sort_by:"creation",sort_order:"desc"}),s=(e==null?void 0:e.message)||e;s&&s.orders&&(i.value=s.orders.map(l=>({id:l.id,customer:l.customer||"N/A",amount:parseFloat(l.amount||0),fee:parseFloat(l.fee||0),status:l.status,utr:l.utr||"-",date:l.date})),c.value=s.total||0)}catch(a){console.error("Error fetching orders:",a),i.value=[],c.value=0}finally{u.value=!1}});w(()=>{let a=[...i.value];if(o.value.status&&o.value.status!=="All Status"&&o.value.status!==""&&(a=a.filter(e=>e.status.toLowerCase()===o.value.status.toLowerCase())),o.value.fromDate){const e=new Date(o.value.fromDate);a=a.filter(s=>new Date(s.date)>=e)}if(o.value.toDate){const e=new Date(o.value.toDate);a=a.filter(s=>new Date(s.date)<=e)}return a});const f=()=>{b.value=1,r()},D=()=>{try{const a={status:o.value.status!=="All Status"?o.value.status:null,from_date:o.value.fromDate||null,to_date:o.value.toDate||null},e=new URLSearchParams({filters:JSON.stringify(a)}).toString();window.location.href=`/api/method/iswitch.merchant_portal_api.export_orders_to_excel?${e}`}catch(a){console.error("Error exporting orders:",a)}};return _(()=>{r()}),(a,e)=>(M(),S("div",N,[t("div",{class:"flex items-center justify-between mb-8"},[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"Orders"),t("p",{class:"text-muted-foreground mt-1"},"View and track all your transaction orders.")],-1)),t("button",{class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2",onClick:D},[...e[3]||(e[3]=[t("svg",{class:"mr-2 h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),T(" Export ",-1)])])]),t("div",R,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-4"},"Filters",-1)),t("div",V,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"STATUS",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.status=s),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[5]||(e[5]=[E('<option value="All Status" data-v-9cfadcdb>All Status</option><option value="Queued" data-v-9cfadcdb>Queued</option><option value="Processing" data-v-9cfadcdb>Processing</option><option value="Processed" data-v-9cfadcdb>Processed</option><option value="Cancelled" data-v-9cfadcdb>Cancelled</option><option value="Reversed" data-v-9cfadcdb>Reversed</option>',6)])],512),[[A,o.value.status]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"FROM DATE & TIME",-1)),m(t("input",{type:"datetime-local","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.fromDate=s),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,o.value.fromDate]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-muted-foreground mb-2"},"TO DATE & TIME",-1)),m(t("input",{type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.toDate=s),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,o.value.toDate]])]),t("button",{class:"w-full inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-6",onClick:f}," Apply Filters ")])]),h(U,{columns:n,data:i.value,"per-page":10},{"cell-customer":O(({value:s})=>[t("div",F,[t("div",P,y(s.charAt(0)),1),t("span",null,y(s),1)])]),_:1},8,["data"])]))}},z=k(j,[["__scopeId","data-v-9cfadcdb"]]);export{z as default};
//# sourceMappingURL=Orders-BiuaUaSW.js.map
